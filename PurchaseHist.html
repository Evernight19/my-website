<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Private Info</title>
</head>
<body>
    <h1>All Purchases</h1>
    <div id="orders"></div>

<!-- Login  -->
    <div id="login">
        <h2>Enter Password</h2>
        <input type="password" id="pw">
        <button onclick="check()">Submit</button>
    </div>


<!-- Display Pre-Login -->
    <div id="content" style="display:none;">


<!-- Main Content -->
<main>




    
<!-- Supabase Display Script -->
    <script>
        const supabaseUrl = "https://qdmvhebngzxjeedoajvs.supabase.co";
        const supabaseKey = "sb_publishable_GKr34Ih7wJfGcIipUyhNpA_i5GMliBK";
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        async function loadOrders() {
            const { data, error } = await supabase
                .from("orders")
                .select("*")
                .order("created_at", { ascending: false });

            const container = document.getElementById("orders");

            data.forEach(order => {
                container.innerHTML += `
                <div>
                    <h3>${order.order_id}</h3>
                    <p>Total: â‚¬${order.total}</p>
                    <p>Date: ${new Date(order.created_at).toLocaleString()}</p>
                    <hr>
                </div>
                `;
            });
        }

        loadOrders();

        const totalRevenue = data.reduce((sum, order) => sum + order.total, 0);

    </script>


</main>
</div>

<!-- Login Script -->
    <script>
        function check() {
            const password = "Naught";
            const input = document.getElementById("pw").value;

            if (input === password) {
                document.getElementById("login").style.display = "none";
                document.getElementById("content").style.display = "block";
            } else {
                alert("Incorrect Password");
            }
        }
    </script>
</body>
</html>